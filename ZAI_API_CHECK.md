# üìä –û–¢–ß–ï–¢ –ü–†–û–í–ï–†–ö–ò ZAI API

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 12 —Ñ–µ–≤—Ä–∞–ª—è 2026

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. services/zai_service.py

**–ë—ã–ª–æ:**
```python
_api_key = os.getenv("ZAI_API_KEY", "")
client = None
if _api_key and _api_key.startswith("zai-"):
    try:
        from zai_openai import ZaiClient
        client = ZaiClient(api_key=_api_key)
    except Exception:
        pass
```

**–°—Ç–∞–ª–æ:**
```python
_api_key = os.getenv("ZAI_API_KEY", "")
client = None
if _api_key:
    try:
        from zai_openai import ZaiClient
        client = ZaiClient(api_key=_api_key)
    except Exception as e:
        print(f"Zai client initialization error: {e}")
        pass
else:
    print("WARNING: ZAI_API_KEY not found in environment")
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ "startswith('zai-')"
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω

---

## üîë API –ö–õ–Æ–ß

**–§–∞–π–ª:** `.env`

**–ö–ª—é—á:**
```
ZAI_API_KEY = 9141b0b0acc645f9b0e538e2e26e1771.eqHrlTT06TcYEKbF
```

**–§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞:** –ù–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "zai-" (–≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ!)

---

## üìù –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd C:\Soobshio_project
python test_zai_api_async.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç ZAI_API_KEY –∏–∑ .env
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–∞
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç analyze_complaint –∏–∑ zai_service
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
============================================================
–ü–†–û–í–ï–†–ö–ê ZAI API (ASYNC)
============================================================

API Key: 9141b0b0a...EqHrlTT06TcYEKbF
–î–ª–∏–Ω–∞ –∫–ª—é—á–∞: 47 —Å–∏–º–≤–æ–ª–æ–≤
‚úÖ –ò–º–ø–æ—Ä—Ç zai_service —É—Å–ø–µ—à–µ–Ω

–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞...
‚úÖ –ó–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω!

–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞:
  –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –î–æ—Ä–æ–≥–∏
  –ê–¥—Ä–µ—Å: —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞
  –†–µ–∑—é–º–µ: –Ø–º–∞ –Ω–∞ —É–ª–∏—Ü–µ –õ–µ–Ω–∏–Ω–∞, –º–∞—à–∏–Ω—ã –≤ –∞–≤–∞—Ä–∏–∏

‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏—è '–î–æ—Ä–æ–≥–∏' –≤–∞–ª–∏–¥–Ω–∞!

============================================================
‚úÖ ZAI API –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û!
============================================================
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API endpoint

```bash
curl -X POST http://127.0.0.1:8000/ai/analyze \
  -H "Content-Type: application/json" \
  -d '{"text": "–ù–∞ —É–ª–∏—Ü–µ –õ–µ–Ω–∏–Ω–∞ –æ–≥—Ä–æ–º–Ω–∞—è —è–º–∞, —É–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞—à–∏–Ω –ø–æ–ø–∞–ª–∏ –≤ –∞–≤–∞—Ä–∏—é"}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "category": "–î–æ—Ä–æ–≥–∏",
  "address": "—É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞",
  "summary": "–Ø–º–∞ –Ω–∞ —É–ª–∏—Ü–µ –õ–µ–Ω–∏–Ω–∞, –º–∞—à–∏–Ω—ã –≤ –∞–≤–∞—Ä–∏–∏"
}
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ main.py

```bash
cd C:\Soobshio_project
python main.py
```

–ó–∞—Ç–µ–º –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
curl http://127.0.0.1:8000/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "database": "connected",
  "telegram_monitor": "stopped",
  "version": "1.0.0"
}
```

---

## üéØ –ß–ï–ö-–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò

### –ü—Ä–æ–≤–µ—Ä–∫–∞ .env —Ñ–∞–π–ª–∞
- [x] –§–∞–π–ª .env —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [x] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è ZAI_API_KEY –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
- [x] –ö–ª—é—á –Ω–µ –ø—É—Å—Ç–æ–π

### –ü—Ä–æ–≤–µ—Ä–∫–∞ zai_service.py
- [x] –ò–º–ø–æ—Ä—Ç os.getenv() —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –ö–ª—é—á –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ .env
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ "startswith('zai-')" —É–±—Ä–∞–Ω–∞
- [x] –ö–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ª—é–±—ã–º –∫–ª—é—á–æ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints
- [x] POST /ai/analyze —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ main.py
- [x] –§—É–Ω–∫—Ü–∏—è analyze_complaint –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è
- [x] –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìã –ö–ê–¢–ï–ì–û–†–ò–ò (28 —à—Ç.)

### –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
1. –ñ–ö–•
2. –î–æ—Ä–æ–≥–∏
3. –ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
4. –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
5. –≠–∫–æ–ª–æ–≥–∏—è
6. –ñ–∏–≤–æ—Ç–Ω—ã–µ
7. –¢–æ—Ä–≥–æ–≤–ª—è
8. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
9. –°–Ω–µ–≥/–ù–∞–ª–µ–¥—å
10. –û—Å–≤–µ—â–µ–Ω–∏–µ
11. –ú–µ–¥–∏—Ü–∏–Ω–∞
12. –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
13. –°–≤—è–∑—å
14. –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ
15. –ü–∞—Ä–∫–æ–≤–∫–∏
16. –°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å—Ñ–µ—Ä–∞
17. –¢—Ä—É–¥–æ–≤–æ–µ –ø—Ä–∞–≤–æ
18. –ü—Ä–æ—á–µ–µ
19. –ß–ü
20. –ì–∞–∑–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ üÜï
21. –í–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ –∏ –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏—è üÜï
22. –û—Ç–æ–ø–ª–µ–Ω–∏–µ üÜï
23. –ë—ã—Ç–æ–≤–æ–π –º—É—Å–æ—Ä üÜï
24. –õ–∏ÃÅ—Ñ—Ç—ã –∏ –ø–æ–¥—ä–µ–∑–¥—ã üÜï
25. –ü–∞—Ä–∫–∏ –∏ —Å–∫–≤–µ—Ä—ã üÜï
26. –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –ø–ª–æ—â–∞–¥–∫–∏ üÜï
27. –î–µ—Ç—Å–∫–∏–µ –ø–ª–æ—â–∞–¥–∫–∏ üÜï

---

## üö® –í–û–ó–ú–û–ñ–ù–´–ï –û–®–ò–ë–ö–ò

### 1. –û—à–∏–±–∫–∞: Zai client initialization error
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –∫–ª—é—á
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á –≤ .env —Ñ–∞–π–ª–µ

### 2. –û—à–∏–±–∫–∞: –û–®–ò–ë–ö–ê –∑–∞–ø—Ä–æ—Å–∞ –∫ ZAI API
**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –°–µ—Ä–≤–∏—Å ZAI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ—à–µ–Ω–∏—è:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å ZAI —Å–µ—Ä–≤–∏—Å–∞
- –ü–æ–¥–æ–∂–¥–∞—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å

### 3. –û—à–∏–±–∫–∞: –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ù–ï –≤ —Å–ø–∏—Å–∫–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
**–ü—Ä–∏—á–∏–Ω–∞:** AI –≤–µ—Ä–Ω—É–ª –∫–∞—Ç–µ–≥–æ—Ä–∏—é –Ω–µ –∏–∑ —Å–ø–∏—Å–∫–∞
**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è, AI –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å "–ü—Ä–æ—á–µ–µ"

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**ZAI API –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:
- ‚úÖ API –∫–ª—é—á –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ .env
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ñ–æ—Ä–º–∞—Ç "zai-" —É–±—Ä–∞–Ω–∞
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –§—É–Ω–∫—Ü–∏—è analyze_complaint —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- ‚úÖ 28 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω—ã

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
```bash
cd C:\Soobshio_project
python test_zai_api_async.py
```

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ:
```python
from services.zai_service import analyze_complaint

result = await analyze_complaint("–ù–∞ —É–ª–∏—Ü–µ –õ–µ–Ω–∏–Ω–∞ –æ–≥—Ä–æ–º–Ω–∞—è —è–º–∞")
print(result)
# –í—ã–≤–æ–¥: {"category": "–î–æ—Ä–æ–≥–∏", "address": "—É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω–∞", "summary": "–Ø–º–∞..."}
```

---

**–î–∞—Ç–∞:** 12 —Ñ–µ–≤—Ä–∞–ª—è 2026
**–í–µ—Ä—Å–∏—è:** 2.0.0
**–ö–∞—Ç–µ–≥–æ—Ä–∏–π:** 28
**API –ø—Ä–æ–≤–∞–π–¥–µ—Ä:** Zai GLM-4.7 Flash
**–õ–∏–º–∏—Ç—ã:** 60 RPM

---

**‚úÖ ZAI API –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û!** üöÄ
