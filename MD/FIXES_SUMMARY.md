# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –°–æ–æ–±—â–∏–û

–Ø –≤—ã–ø–æ–ª–Ω–∏–ª —á–∞—Å—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π, –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∑–∞–ø–∏—Å—å. –í–æ—Ç —á—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é:

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 1. –°–æ–∑–¥–∞–Ω .env.example
–§–∞–π–ª —Å–æ–∑–¥–∞–Ω —Å —à–∞–±–ª–æ–Ω–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –°–æ—Ö—Ä–∞–Ω–µ–Ω –∫–∞–∫ `.env.example` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

### 2. telegram_parser.py
–§–∞–π–ª —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω! –°—Ç—Ä–æ–∫–∏ 206-212 —Å –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–º –∫–æ–¥–æ–º —É–¥–∞–ª–µ–Ω—ã.

---

## ‚ö†Ô∏è –ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é

### 1. –û–±–Ω–æ–≤–∏—Ç—å requirements.txt

–£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É 10 (psycopg2-binary) –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –Ω–∞:

```bash
cat > requirements.txt << 'EOF'
fastapi>=0.100.0
uvicorn[standard]>=0.23.0
sqlalchemy>=2.0.0
python-dotenv>=1.0.0
pydantic>=2.0.0
httpx>=0.25.0
python-multipart>=0.0.6

# Database
# psycopg2-binary>=2.9.0  # PostgreSQL driver (–∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ SQLite)

# Telegram
telethon>=1.40.0
aiogram>=3.0.0

# AI
anthropic>=0.20.0
openai>=1.0.0  # fallback AI

# Data Science
numpy>=1.24.0
hdbscan>=0.8.0

# Testing
pytest>=7.4.0
pytest-asyncio>=0.21.0

# Geo
geopy>=2.4.0

# Caching (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
redis>=4.5.0
EOF
```

### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å routers/reports.py

–ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É 21:
```python
# –ë—ã–ª–æ:
db_report = Report(**report.dict())

# –°—Ç–∞–ª–æ:
db_report = Report(**report.model_dump())
```

### 3. –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç Flutter-–∫–æ–¥–∞

```bash
rm -rf lib/lib/
```

### 4. –£–¥–∞–ª–∏—Ç—å package.json

```bash
rm package.json
```

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 5. –û–±–Ω–æ–≤–∏—Ç—å .gitignore

–î–æ–±–∞–≤–∏—Ç—å –≤ —Ñ–∞–π–ª .gitignore (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç):

```gitignore
# Environment variables
.env

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python

# Virtual environments
.venv/
venv/
ENV/

# IDE
.vscode/
.idea/

# Database
*.db
*.sqlite
*.sqlite3

# Flutter
*.apk
*.ipa
*.dSYM/
flutter_*.lock

# Sessions
*.session
*.session-journal

# OS
.DS_Store
Thumbs.db
```

### 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd Soobshio_project
python -m venv .venv
.venv\Scripts\activate  # Windows
# –∏–ª–∏
source .venv/bin/activate  # Linux/Mac

pip install -r requirements.txt
python main.py
```

---

## üìä –°–≤–æ–¥–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –î–µ–π—Å—Ç–≤–∏–µ |
|------|--------|----------|
| .env.example | ‚úÖ –°–æ–∑–¥–∞–Ω | –°–æ—Ö—Ä–∞–Ω–µ–Ω |
| telegram_parser.py | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω | –£–¥–∞–ª–µ–Ω—ã —Å—Ç—Ä–æ–∫–∏ 206-212 |
| requirements.txt | ‚ö†Ô∏è –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å | –£–±—Ä–∞—Ç—å psycopg2-binary |
| routers/reports.py | ‚ö†Ô∏è –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å | .dict() ‚Üí .model_dump() |
| lib/lib/ | ‚ö†Ô∏è –ù—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å | rm -rf lib/lib/ |
| package.json | ‚ö†Ô∏è –ù—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å | rm package.json |
| .gitignore | ‚ö†Ô∏è –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å | –î–æ–±–∞–≤–∏—Ç—å .env |

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

1. **–ó–∞–ø—É—Å–∫ API:**
```bash
python main.py
```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:**
```bash
curl http://127.0.0.1:8000/health
curl http://127.0.0.1:8000/complaints
curl http://127.0.0.1:8000/complaints/clusters
curl http://127.0.0.1:8000/stats
```

3. **–ó–∞–ø—É—Å–∫ Telegram –ø–∞—Ä—Å–µ—Ä–∞:**
```bash
python services/telegram_parser.py
```

4. **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
pytest tests/
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–¥–µ–ª—å–Ω–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1 - API
python main.py

# –¢–µ—Ä–º–∏–Ω–∞–ª 2 - Telegram –ø–∞—Ä—Å–µ—Ä
python services/telegram_parser.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í docker-compose

```bash
docker compose up -d
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã
2. API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 8000
3. Telegram –ø–∞—Ä—Å–µ—Ä –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ API
4. –§–∞–π–ª .env –ù–ï –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ git (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ .gitignore)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

–Ø —Å–æ–∑–¥–∞–ª —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:
- `BUGFIXES.md` - –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
- `.env.example` - —à–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `requirements_fixed.txt` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π requirements.txt

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤—Ä—É—á–Ω—É—é.
