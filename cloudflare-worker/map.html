<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>–ü—É–ª—å—Å –≥–æ—Ä–æ–¥–∞ ‚Äî –ö–∞—Ä—Ç–∞</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"/>
</head>
<body>
<!-- Splash -->
<div id="splash">
  <div class="splash-bg"><canvas id="pulseCanvas"></canvas></div>
  <div class="splash-content">
    <div class="city-emblem">
      <svg viewBox="0 0 120 120" class="emblem-svg">
        <polygon points="60,8 52,50 68,50" fill="none" stroke="currentColor" stroke-width="2" opacity=".7"/>
        <line x1="56" y1="28" x2="64" y2="28" stroke="currentColor" stroke-width="1.5" opacity=".5"/>
        <line x1="54" y1="38" x2="66" y2="38" stroke="currentColor" stroke-width="1.5" opacity=".5"/>
        <path d="M25,85 L35,55 L30,60 L38,35 L33,42 L38,22 L43,42 L38,35 L46,60 L41,55 L51,85Z" fill="currentColor" opacity=".15" stroke="currentColor" stroke-width="1"/>
        <path d="M10,95 Q30,88 50,92 Q70,96 90,90 Q105,86 115,88" fill="none" stroke="currentColor" stroke-width="2" opacity=".3" stroke-linecap="round"/>
        <path d="M10,102 Q35,95 55,99 Q75,103 95,97 Q108,93 115,95" fill="none" stroke="currentColor" stroke-width="1.5" opacity=".2" stroke-linecap="round"/>
        <path d="M15,15 Q60,-5 105,15" fill="none" stroke="currentColor" stroke-width="1" opacity=".2"/>
      </svg>
    </div>
    <div class="splash-pulse-ring" id="pulseRing">
      <div class="ring r1"></div><div class="ring r2"></div><div class="ring r3"></div>
      <div class="pulse-core" id="pulseCore"></div>
    </div>
    <h1 class="splash-title">–ü—É–ª—å—Å –≥–æ—Ä–æ–¥–∞</h1>
    <div class="splash-city">–ù–ò–ñ–ù–ï–í–ê–†–¢–û–í–°–ö</div>
    <div class="splash-mood" id="moodText">–ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è...</div>
    <div class="splash-stats" id="splashStats">
      <div class="ss-item"><span class="ss-num" id="ssTotal">‚Äî</span><span class="ss-label">–ø—Ä–æ–±–ª–µ–º</span></div>
      <div class="ss-item"><span class="ss-num" id="ssOpen">‚Äî</span><span class="ss-label">–æ—Ç–∫—Ä—ã—Ç–æ</span></div>
      <div class="ss-item"><span class="ss-num" id="ssResolved">‚Äî</span><span class="ss-label">—Ä–µ—à–µ–Ω–æ</span></div>
    </div>
    <div class="splash-loader"><div class="sl-bar"><div class="sl-fill" id="slFill"></div></div><div class="sl-text" id="slText">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
  </div>
</div>
<!-- Main -->
<div id="app" style="display:none">
  <div id="map"></div>
  <!-- Top bar: header + stats -->
  <div id="topBar">
    <div class="tb-header">
      <div class="tb-pulse"></div>
      <div class="tb-title">–ü—É–ª—å—Å –≥–æ—Ä–æ–¥–∞</div>
      <div class="tb-city">–ù–∏–∂–Ω–µ–≤–∞—Ä—Ç–æ–≤—Å–∫</div>
    </div>
    <div class="tb-stats">
      <div class="tb-stat"><span class="tb-num" id="st">0</span><span class="tb-lbl">–≤—Å–µ–≥–æ</span></div>
      <div class="tb-stat"><span class="tb-num red" id="so">0</span><span class="tb-lbl">–æ—Ç–∫—Ä—ã—Ç–æ</span></div>
      <div class="tb-stat"><span class="tb-num yellow" id="sw">0</span><span class="tb-lbl">–≤ —Ä–∞–±–æ—Ç–µ</span></div>
      <div class="tb-stat"><span class="tb-num green" id="sr">0</span><span class="tb-lbl">—Ä–µ—à–µ–Ω–æ</span></div>
    </div>
  </div>
  <!-- Filter panel -->
  <div id="filterPanel">
    <div class="fp-row" id="dayFilters"></div>
    <div class="fp-row" id="catFilters"></div>
    <div class="fp-row" id="statusFilters"></div>
  </div>
  <!-- Timeline chart -->
  <div id="timeline" class="tl-panel">
    <canvas id="tlCanvas" height="50"></canvas>
  </div>
  <!-- Legend -->
  <div class="leg-panel" id="leg"></div>
  <!-- Toast -->
  <div class="toast" id="newToast" style="display:none">
    <span class="toast-icon">üîî</span><span class="toast-text" id="toastText"></span>
  </div>
  <!-- FAB ‚Äî –ø–æ–¥–∞—Ç—å –∂–∞–ª–æ–±—É -->
  <button class="fab" id="fabNew" title="–ü–æ–¥–∞—Ç—å –∂–∞–ª–æ–±—É">+</button>
  <!-- Complaint form -->
  <div class="cf-overlay" id="cfOverlay">
    <div class="cf-sheet">
      <h3>üìù –ü–æ–¥–∞—Ç—å –∂–∞–ª–æ–±—É</h3>
      <div class="cf-field"><label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
        <select id="cfCat"></select></div>
      <div class="cf-field"><label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
        <textarea id="cfDesc" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É..." rows="3"></textarea></div>
      <div class="cf-field"><label>–ê–¥—Ä–µ—Å <span class="cf-gps" id="cfGps">üìç –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ GPS</span></label>
        <input id="cfAddr" placeholder="—É–ª. –õ–µ–Ω–∏–Ω–∞, 5" /></div>
      <div class="cf-field" style="display:flex;gap:8px">
        <div style="flex:1"><label>–®–∏—Ä–æ—Ç–∞</label><input id="cfLat" type="number" step="0.0001" placeholder="60.9344" /></div>
        <div style="flex:1"><label>–î–æ–ª–≥–æ—Ç–∞</label><input id="cfLng" type="number" step="0.0001" placeholder="76.5531" /></div>
      </div>
      <div class="cf-btns">
        <button class="cf-btn secondary" id="cfCancel">–û—Ç–º–µ–Ω–∞</button>
        <button class="cf-btn primary" id="cfSubmit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>
</div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
</body>
</html>
